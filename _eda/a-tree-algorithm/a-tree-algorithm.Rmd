---
title: "A-tree Algorithm"
description: |
  Note for EDA routing algorithm - A-tree Algorithm

author:
  - name: Bo-Wei Chen
    url: https://BWbwchen.github.io/
date: 2022-05-03
output:
  distill::distill_article:
    toc: true
    toc_depth: 4
    self_contained: false
  toc_float: 
    collapsed: false
    smooth_scroll: true
draft: false
creative_commons: CC BY
editor_options: 
  markdown: 
    wrap: 72
categories:
  - EDA
  - routing
  - CAD
preview: https://cdn.pixabay.com/photo/2020/09/06/08/00/red-thread-5548304_960_720.jpg
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


## MSP-SA and MRSA
- MSP-SA is Minimum shortest path steiner arborescence.
- MRSA is rectilinear version of MSP-SA. Minimum Rectilinear steiner arborescence.

## Goal
- Use A-tree Algorithm to solve MRSA problem.
- Minimize the overall wire length.
- Also maintaining the shortest linear path length from source to all sink node.

## Algorithm

### Partition the neighboring nodes of every node $p$
- nodes in $NW(p), SE(P)$ or $D(p, F_k)$ are root node!
- ![https://i.imgur.com/1TMlxqZ.jpg](https://i.imgur.com/1TMlxqZ.jpg)
- ![https://i.imgur.com/tg3K7Lo.jpg](https://i.imgur.com/tg3K7Lo.jpg)

### 3 value( $dx, dy, df$ )
- $dx$ is the minimum horizontal distance from $p$ to the node in $NW(p)$ , which isn't blocked by $p$
	- 沒被 block的root node 且與 $p$ 最短水平距離
- $dy$ is the minimum vertical distance from $p$ to the node in $SE(p)$ , which isn't blocked by $p$
	- 沒被 block的root node 且與 $p$ 最短垂直距離
- $dy$ is the minimum rectilinear distance from $p$ to the node in $D(p, F_k)$ . nodes here don't need to be root nodes.
	- $mf_w$ is the node with minimum x-coordinate.
	- $mf_s$ is the node with minimum y-coordinate.
	- 與 $p$ 有最短 rectilinear 距離的 node (不一定要是 root node)

### 3 safe moves

#### T1
- $dx \ge df$ and $dy \ge df$ . It means that we will only use nodes in $D(p,F_k)$
- Add a path that connect $p$ and $mf_w$ .
- Remove $p$ from root node list.

#### T2
- $dx \ge df$ and $dy < df$ . It means that we may use node in $SE(p)$ or $D(p, F_k)$
- Add down-ward vertical path of length $p'$ and that point is a steiner point.
	- $p' = \min (d(p, mf_s), dy)$
- Remove $p$ from root node list and add node $p'$ into root node list.

#### T3
- $dx < df$ and $dy \ge df$ . It means that we may use node in $NW(p)$ or $D(p, F_k)$
- Add left-ward vertical path of length $p'$ and that point is a steiner point.
	- $p' = \min (d(p, mf_w), dx)$
- Remove $p$ from root node list and add node $p'$ into root node list.

### Processing
- Start with an initial forest $F_0$ , which is construct by all node.
- then a sequence of moves, which are growing(T2, T3) or merging(T1), are performed.
	- After each move, we will need to recalculate the $dx, dy, df$ value.
- At the end, there will remain only 1 tree and we done.
