---
title: "Normalized Polish Expression
"
description: |
  Note for EDA floorplanning algorithm - Normalized Polish Expression
author:
  - name: Bo-Wei Chen
    url: https://BWbwchen.github.io/
date: 2022-03-16
output:
  distill::distill_article:
    toc: true
    toc_depth: 2
    self_contained: false
  toc_float: 
    collapsed: false
    smooth_scroll: true
draft: false
creative_commons: CC BY
editor_options: 
  markdown: 
    wrap: 72
categories:
  - EDA
  - floorplanning
  - CAD
preview: https://cdn.pixabay.com/photo/2016/11/24/20/30/architecture-1857175_960_720.jpg
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


# Goal
- Given the polish expression of a slicing tree, output the minimum size of floor planning.
- $PE = 25V 1H374V H6V 8V H$
- ![https://i.imgur.com/yeHM3dJ.png](https://i.imgur.com/yeHM3dJ.png)

# Property of normalized polish expression
- Each block(operand) appears exactly once in the string. (eg. only one 2 or 5 in the string)
- Balloting property
	- The number of operands is larger than the number of operators
- Normality property
	- No consecutive operators of the same type in the string
	- 1-1 correspondence to a slicing tree. (NPE can obtain an unique slicing tree)

# Idea
- Use Simulate Annealing algorithm
- What is the neighbor of the current polish expression?
	- $Move_1$ : Swap adjacent operands.
		- eg. 25V -> 52V or 374V -> 734V
	- $Move_2$ : Swap two operators.
		- eg. 25V1H -> 25H1V
	- $Move_3$ : Swap adjacent operand and operator.
		- eg. 6V8V -> V68V
		- NOTICE!! need to keep the Balloting property and Normality property .

# Algorithm
- Random polish expression $PE_0$
- Parameters for Simulate Annealing algorithm
	- $T_0$ and $T_{end}$
	- Cooling rate $\alpha$
	- Number of move at each temperature $M_t$
- $Z$ is the optimal answer that we currently have
- For $i$ in each temperature
	- Perform one of the three type of move above $PE_i'$
	- $C_i = A_i + \lambda \cdot W_i$
		- $C_i$ is the cost of $PE_i'$
		- $A_i$ is the area of $PE_i'$
		- $\lambda$ is a hyperparameter
		- $W_i$ is the wirelength of $PE_i'$
	- $\Delta C = C_i - C_{i-1}$
	- Decide whether to accept this proposal
		- If $\Delta C > 0$
			- Accept this change
		- else
			- Calculate the probability $p = exp(\Delta C / T_i)$
			- If $p > rand(0, 1)$
				- Accept this change
			- else
				- Reject this change
	- Update the temperature
		- $T = \alpha T$

# Problem
- How to generate the initial slicing tree input?