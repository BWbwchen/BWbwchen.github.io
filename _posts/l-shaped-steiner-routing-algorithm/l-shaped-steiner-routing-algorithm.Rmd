---
title: "L-shaped Steiner Routing Algorithm"
description: |
  Note for EDA routing algorithm - L-shaped Steiner Routing Algorithm

author:
  - name: Bo-Wei Chen
    url: https://BWbwchen.github.io/
date: 2022-04-21
output:
  distill::distill_article:
    toc: true
    toc_depth: 4
    self_contained: false
  toc_float: 
    collapsed: false
    smooth_scroll: true
draft: false
creative_commons: CC BY
editor_options: 
  markdown: 
    wrap: 72
categories:
  - EDA
  - routing
  - CAD
preview: https://cdn.pixabay.com/photo/2020/09/06/08/00/red-thread-5548304_960_720.jpg
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

- solve the RST (Rectilinear Steiner Tree) problem by constructing a R-MST (Rectilinear Minimum Spanning Tree) and refine it.

## Prerequisite
- $cost(\forall RMST) \leq 1.5cost(\text{optimal } RST)$
- Use prim or kruskal algorithm to construct the minimum spanning tree.

## Goal
- Maximize the number of overlapping edges.

## Algorithm
![https://i.imgur.com/f1FDkYj.png](https://i.imgur.com/f1FDkYj.png)

### Construct minimum spanning tree
- $\textrm{weight}(i, j) = (D(i, j), -|y(i) - y(j)|, -\max\{x(i), x(j)\})$
- We want to find the shortest edges, larger vertical distance and rightmost vertices.

### Determine the shape of each edge(upper L or lower L) by DP in bottom-up fashion
- Calculate $\Phi_\ell(v)$ and $\Phi_u(v)$
- $\Phi_\ell(v)$ means the number of overlapping edge when $e_v$ is lower L.
- $\Phi_u(v)$ means the number of overlapping edge when $e_v$ is upper L.

### Brute force all possible case
- $\Phi_{\ell \text{ or } u}(v) = \max(Z_1 + Z_2)$
	- $Z_1 =$ overlap in all of edges incident to $v$
		- Calculate the overlapping of $e_v$ with all the combinations of the children of $v$ (lower or upper L)
	- $Z_2 =$ overlap in the children of $v$
		- Sum up the corresponding combination's $\Phi_\ell(k)$ or $\Phi_u(k)$ , $k$ is the children of $v$

### Visit the tree in top-down fashion to construct the steiner tree