<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Google File System paper note | Bo-Wei Chen&#39;s Blog</title>

<meta name="keywords" content="distributed system, gfs" />
<meta name="description" content="Paper note of Google File System">
<meta name="author" content="Bo-Wei Chen">
<link rel="canonical" href="https://BWbwchen.github.io/posts/gfs/" />
<link href="/assets/css/stylesheet.min.d5d820de85dae34a78c22303e07aa685bb90ec25a056c702c0b1a964ca68861d.css" integrity="sha256-1dgg3oXa40p4wiMD4HqmhbuQ7CWgVscCwLGpZMpohh0=" rel="preload stylesheet"
    as="style">

<link rel="icon" href="https://BWbwchen.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://BWbwchen.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://BWbwchen.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://BWbwchen.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://BWbwchen.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.80.0" />


<meta property="og:title" content="Google File System paper note" />
<meta property="og:description" content="Paper note of Google File System" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://BWbwchen.github.io/posts/gfs/" />
<meta property="article:published_time" content="2021-12-20T14:14:21+08:00" />
<meta property="article:modified_time" content="2021-12-20T14:14:21+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Google File System paper note"/>
<meta name="twitter:description" content="Paper note of Google File System"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Google File System paper note",
  "name": "Google File System paper note",
  "description": "Paper note of Google File System",
  "keywords": [
    "distributed system", "gfs"
  ],
  "articleBody": "GFS Goal  全局通用的儲存系統 高容量高速→ 需要 sharding 自動修復 大量順序讀取，record append  Constraint  在一個 data center. 可以允許一點點的錯誤 only guarantees that the data is written at least once as an atomic unit. → If writing success, data must have been written at the same offset on all replicas of some chunk.  Architecture  單一 master node, 多個 chunk server  Master Node  管理文件與 chunk info (file → chunk IDs)  Use read-write lock → concurrent mutation in the same directory.    儲存：（要存在硬碟，不用存在硬碟）  file → Chunk handlers Chunk handlers → Chunk Data  每個 chunk 在哪個 chunk server 上 Chunk version number 主 chunk 在哪個 chunk server （因為寫入必須要在主 chunk） 主 chunk expiration time.     使用 log 紀錄每一次的操作  Chunk Server  儲存實際 data 64MB 為一個 chunk 並依照 chunk id 作為 filename 存成一個檔案  Tech 讀   client 發出請求讀 file, offset\n  master 得知該 file 的 chunk id list，透過 offset / 64 得到對應的 chunk id\n  master 將該 chunk id 所在的 chunk server id list 與 chunk id(handle) 傳回給 client.\n   client 從 chunk server id list(cache this!) 挑一個獲取 data\n  client 將 chunk handle(id), byte range 交給 chunk server\n  chunk server 將對應的 chunk id file with byte range 讀出交給 client\n  寫 Record Append (追加在文件最後面)  只能對 主 chunk (Primary Chunk) 來寫入  But, What if the primary chunk doesn’t exist? find the up-to-date chunk replicas. (By the version number!!) → (Not found? Crash) The other will be the secondary chunk Notify the primary and secondary servers of their roles and new version numbers. [The data in the primary and secondary servers are up-to-date??] [primary will notify the offset so if it is not up-to-date, it will leave a hole.] Giving the expiration time for the primary. (prevent multiple primary servers, split-brain!!) Increase the chunk version number   If the master wants to change the primary server, it can wait until the primary is expired. (Not communication needed!) If the writing data is too large, break it down into multiple write operations.   Client 提供 filename 並要求追加內容→ master Master → the server which contains the primary chunk (Primary server) The client sends the data to the primary and secondary servers, and the server will save them in a temporary place. After the primary and secondary server receives the data → “Receive the data!” to Client  The primary will check whether need a new chunk. Optimization: Send the data to the nearest server, and propagate it to the other server.   Client “Append record now!” → Primary write the data and notify the secondary server to write data. the secondary will return the status to the primary server, “yes” or “no”.  All “yes” → “Done” to Client. else → “Fail” to Client. The client should start from 1.  But!! The chunk server will Not recover the original data!      Garbage Collection  Rename the filename into a hidden name with a deletion timestamp. During the master’s regular scan, it removes the file and metadata.  Error Handle Data Consistent  不同 chunk server 的 data 可能會略有不同！ The primary will notify the offset so if it is not up-to-date, it will leave a hole.  The client needs to tolerant the out-of-order data order.    If you want to make it a 強一致性 :  Detect the repeated request. whether this request is retry. Primary - secondary should be a two-phase commit.  Problem  Out of RAM of the master node. Too many requests for a single master node.  ",
  "wordCount" : "544",
  "inLanguage": "en",
  "datePublished": "2021-12-20T14:14:21+08:00",
  "dateModified": "2021-12-20T14:14:21+08:00",
  "author":{
    "@type": "Person",
    "name": "Bo-Wei Chen"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://BWbwchen.github.io/posts/gfs/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Bo-Wei Chen's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://BWbwchen.github.io/favicon.ico"
    }
  }
}
</script>



</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        .theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://BWbwchen.github.io/" accesskey="h" title="Bo-Wei Chen&#39;s Blog (Alt + H)">Bo-Wei Chen&#39;s Blog</a>
            <span class="logo-switches">
                <span class="theme-toggle" title="(Alt + T)">
                    <a id="theme-toggle" accesskey="t">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </a>
                </span>
                
            </span>
        </div>
        <ul class="menu" id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://BWbwchen.github.io/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://BWbwchen.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://BWbwchen.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://BWbwchen.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li></ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      Google File System paper note
    </h1>
    <div class="post-description">
      
    </div>
    <div class="post-meta">

December 20, 2021&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Bo-Wei Chen

    </div>
  </header> 

  <div class="toc">
    <details >
      <summary accesskey="c" title="(Alt + C)">
        <div class="details">Table of Contents</div>
      </summary>
      <div class="inner"><ul><li>
        <a href="#gfs" aria-label="GFS">GFS</a></li><li>
        <a href="#goal" aria-label="Goal">Goal</a></li><li>
        <a href="#constraint" aria-label="Constraint">Constraint</a></li><li>
        <a href="#architecture" aria-label="Architecture">Architecture</a><ul>
            <li>
        <a href="#master-node" aria-label="Master Node">Master Node</a></li><li>
        <a href="#chunk-server" aria-label="Chunk Server">Chunk Server</a></li></ul>
    </li><li>
        <a href="#tech" aria-label="Tech">Tech</a><ul>
            <li>
        <a href="#%e8%ae%80" aria-label="讀">讀</a></li><li>
        <a href="#%e5%af%ab" aria-label="寫">寫</a><ul>
            <li>
        <a href="#record-append-%e8%bf%bd%e5%8a%a0%e5%9c%a8%e6%96%87%e4%bb%b6%e6%9c%80%e5%be%8c%e9%9d%a2" aria-label="Record Append (追加在文件最後面)">Record Append (追加在文件最後面)</a></li></ul>
    </li><li>
        <a href="#garbage-collection" aria-label="Garbage Collection">Garbage Collection</a></li><li>
        <a href="#error-handle" aria-label="Error Handle">Error Handle</a></li><li>
        <a href="#data-consistent" aria-label="Data Consistent">Data Consistent</a><ul>
            <li>
        <a href="#if-you-want-to-make-it-a-%e5%bc%b7%e4%b8%80%e8%87%b4%e6%80%a7-" aria-label="If you want to make it a 強一致性 :">If you want to make it a 強一致性 :</a></li></ul>
    </li></ul>
    </li><li>
        <a href="#problem" aria-label="Problem">Problem</a></li></ul>
      </div>
    </details>
  </div>
  <div class="post-content">
<h1 id="gfs">GFS<a hidden class="anchor" aria-hidden="true" href="#gfs">#</a></h1>
<h1 id="goal">Goal<a hidden class="anchor" aria-hidden="true" href="#goal">#</a></h1>
<ul>
<li>全局通用的儲存系統</li>
<li>高容量高速→ 需要 sharding</li>
<li>自動修復</li>
<li><strong>大量</strong>順序讀取，record append</li>
</ul>
<h1 id="constraint">Constraint<a hidden class="anchor" aria-hidden="true" href="#constraint">#</a></h1>
<ul>
<li>在一個 data center.</li>
<li>可以允許一點點的錯誤</li>
<li>only guarantees that the data is written at least once as an atomic unit. → If writing success, data must have been written at the same offset on all replicas of some chunk.</li>
</ul>
<h1 id="architecture">Architecture<a hidden class="anchor" aria-hidden="true" href="#architecture">#</a></h1>
<ul>
<li>單一 master node, 多個 chunk server</li>
</ul>
<h2 id="master-node">Master Node<a hidden class="anchor" aria-hidden="true" href="#master-node">#</a></h2>
<ul>
<li>管理文件與 chunk info (file → chunk IDs)
<ul>
<li>Use read-write lock → concurrent mutation in the same directory.</li>
<li></li>
</ul>
</li>
<li>儲存：（<strong>要存在硬碟</strong>，不用存在硬碟）
<ul>
<li>file → <strong>Chunk handlers</strong></li>
<li>Chunk handlers → Chunk Data
<ul>
<li>每個 chunk 在哪個 chunk server 上</li>
<li>Chunk <strong>version number</strong></li>
<li>主 chunk 在哪個 chunk server （因為寫入必須要在主 chunk）</li>
<li>主 chunk expiration time.</li>
</ul>
</li>
</ul>
</li>
<li>使用 log 紀錄每一次的操作</li>
</ul>
<h2 id="chunk-server">Chunk Server<a hidden class="anchor" aria-hidden="true" href="#chunk-server">#</a></h2>
<ul>
<li>儲存實際 data</li>
<li>64MB 為一個 chunk 並依照 chunk id 作為 filename 存成一個檔案</li>
</ul>
<h1 id="tech">Tech<a hidden class="anchor" aria-hidden="true" href="#tech">#</a></h1>
<h2 id="讀">讀<a hidden class="anchor" aria-hidden="true" href="#讀">#</a></h2>
<p><img src="/img/gfs_read.png#center" alt="gfs_read"></p>
<ol>
<li>
<p>client 發出請求讀 file, offset</p>
</li>
<li>
<p>master 得知該 file 的 chunk id list，透過 offset / 64 得到對應的 chunk id</p>
</li>
<li>
<p>master 將該 chunk id 所在的 chunk server id list 與 chunk id(handle) 傳回給 client.</p>
<hr>
</li>
<li>
<p>client 從 chunk server id list(cache this!) 挑一個獲取 data</p>
</li>
<li>
<p>client 將 chunk handle(id), byte range 交給 chunk server</p>
</li>
<li>
<p>chunk server 將對應的 chunk id file with byte range 讀出交給 client</p>
</li>
</ol>
<h2 id="寫">寫<a hidden class="anchor" aria-hidden="true" href="#寫">#</a></h2>
<p><img src="/img/gfs_write.png#center" alt="gfs_write.png"></p>
<h3 id="record-append-追加在文件最後面">Record Append (追加在文件最後面)<a hidden class="anchor" aria-hidden="true" href="#record-append-追加在文件最後面">#</a></h3>
<ul>
<li>只能對 主 chunk (Primary Chunk) 來寫入
<ul>
<li>But, What if the primary chunk doesn&rsquo;t exist?</li>
<li>find the up-to-date chunk replicas. (By the version number!!) → (Not found? Crash)</li>
<li>The other will be the secondary chunk</li>
<li>Notify the primary and secondary servers of their roles and new version numbers. <em>[The data in the primary and secondary servers are up-to-date??] [primary will notify the <strong>offset</strong> so if it is not up-to-date, it will leave a hole.]</em></li>
<li>Giving the expiration time for the primary. (prevent multiple primary servers, split-brain!!)</li>
<li>Increase the chunk version number</li>
</ul>
</li>
<li>If the master wants to change the primary server, it can wait until the primary is expired. (Not communication needed!)</li>
<li>If the writing data is too large, break it down into multiple write operations.</li>
</ul>
<ol>
<li>Client 提供 filename 並要求追加內容→ master</li>
<li>Master → the server which contains the primary chunk (Primary server)</li>
<li>The client sends the data to the primary and secondary servers, and the server will save them in a temporary place. After the primary and secondary server receives the data → &ldquo;Receive the data!&rdquo; to Client
<ol>
<li>The primary will check whether need a new chunk.</li>
<li>Optimization: Send the data to the nearest server, and propagate it to the other server.</li>
</ol>
</li>
<li>Client &ldquo;Append record now!&rdquo; → Primary write the data and notify the secondary server to write data.</li>
<li>the secondary will return the status to the primary server, &ldquo;yes&rdquo; or &ldquo;no&rdquo;.
<ol>
<li>All &ldquo;yes&rdquo; → &ldquo;Done&rdquo; to Client.</li>
<li>else → &ldquo;Fail&rdquo; to Client. The client should start from 1.
<ol>
<li>But!! The chunk server will Not recover the original data!</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="garbage-collection">Garbage Collection<a hidden class="anchor" aria-hidden="true" href="#garbage-collection">#</a></h2>
<ol>
<li>Rename the filename into a hidden name with a deletion timestamp.</li>
<li>During the master’s regular scan, it removes the file and metadata.</li>
</ol>
<h2 id="error-handle">Error Handle<a hidden class="anchor" aria-hidden="true" href="#error-handle">#</a></h2>
<h2 id="data-consistent">Data Consistent<a hidden class="anchor" aria-hidden="true" href="#data-consistent">#</a></h2>
<ul>
<li>不同 chunk server 的 data 可能會略有不同！</li>
<li>The primary will notify the offset so if it is not up-to-date, it will leave a hole.
<ul>
<li>The client needs to tolerant the out-of-order data order.</li>
</ul>
</li>
</ul>
<h3 id="if-you-want-to-make-it-a-強一致性-">If you want to make it a 強一致性 :<a hidden class="anchor" aria-hidden="true" href="#if-you-want-to-make-it-a-強一致性-">#</a></h3>
<ol>
<li>Detect the repeated request. whether this request is retry.</li>
<li>Primary - secondary should be a two-phase commit.</li>
</ol>
<h1 id="problem">Problem<a hidden class="anchor" aria-hidden="true" href="#problem">#</a></h1>
<ol>
<li>Out of RAM of the master node.</li>
<li>Too many requests for a single master node.</li>
</ol>

</div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://BWbwchen.github.io/tags/distributed-system/">distributed system</a></li>
      <li><a href="https://BWbwchen.github.io/tags/gfs/">gfs</a></li>
    </ul>






<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Google File System paper note on twitter"
        href="https://twitter.com/intent/tweet/?text=Google%20File%20System%20paper%20note&amp;url=https%3a%2f%2fBWbwchen.github.io%2fposts%2fgfs%2f&amp;hashtags=distributedsystem%2cgfs">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Google File System paper note on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fBWbwchen.github.io%2fposts%2fgfs%2f&amp;title=Google%20File%20System%20paper%20note&amp;summary=Google%20File%20System%20paper%20note&amp;source=https%3a%2f%2fBWbwchen.github.io%2fposts%2fgfs%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Google File System paper note on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fBWbwchen.github.io%2fposts%2fgfs%2f&title=Google%20File%20System%20paper%20note">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Google File System paper note on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fBWbwchen.github.io%2fposts%2fgfs%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Google File System paper note on whatsapp"
        href="https://api.whatsapp.com/send?text=Google%20File%20System%20paper%20note%20-%20https%3a%2f%2fBWbwchen.github.io%2fposts%2fgfs%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Google File System paper note on telegram"
        href="https://telegram.me/share/url?text=Google%20File%20System%20paper%20note&amp;url=https%3a%2f%2fBWbwchen.github.io%2fposts%2fgfs%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main><footer class="footer">
    <span>&copy; 2022 <a href="https://BWbwchen.github.io/">Bo-Wei Chen&#39;s Blog</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>



<script defer src="/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.replaceState(null, null, `#${id}`);
            }
        });
    });
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

</body>

</html>
